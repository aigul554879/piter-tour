<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Маршрут: Александр Керенский</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            navy: '#2F4156',
            teal: '#567C8D',
            beige: '#F5EFEB',
            skyblue: '#C8D9E6',
            white: '#FFFFFF',
          }
        }
      }
    }
  </script>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    /* Карта и контейнер */
    #map { min-height: 300px; height: 100%; }
    .leaflet-container { border-radius: 18px; width: 100%; height: 100%; }
    .map-wrapper { flex: 1; min-height: 300px; }
  </style>
</head>
<body class="bg-beige min-h-screen text-navy font-sans">
  <div class="max-w-5xl mx-auto my-7 bg-white rounded-2xl shadow p-6">
    <h1 class="text-2xl md:text-3xl font-bold text-center mb-3">Маршрут: Александр Керенский</h1>
    <p class="mb-6 text-center">Прогулка по ключевым точкам Санкт-Петербурга, связанным с жизнью и деятельностью Александра Керенского.</p>

    <div class="flex flex-col md:flex-row gap-6">
      <!-- Левая колонка: карта -->
      <div class="map-wrapper">
        <div id="map"></div>
      </div>

      <!-- Правая колонка: инфо -->
      <div id="info" class="w-full md:w-96 min-h-[250px] bg-skyblue rounded-2xl p-5 shadow flex items-center justify-center">
        <div id="info-content" class="text-center text-navy opacity-80">
          <p class="font-semibold">Кликните на маркер, чтобы увидеть фото и описание</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Данные точек
    const points = [
      { name:"Таврический дворец", coords:[59.9512,30.3897], imgs:["img/tauride1.jpg","img/tauride2.jpg"], desc:"Здесь …", route:"https://www.google.com/maps/dir/?api=1&destination=59.9512,30.3897" },
      // … остальные
    ];

    // Инициализируем карту с тайлами CartoDB Positron
    const map = L.map('map', { attributionControl: false }).setView([59.9343,30.3351],12);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; OpenStreetMap contributors &copy; CARTO',
      maxZoom:19
    }).addTo(map);

    // Создаём маркеры
    const markers = points.map((p,i) => {
      const m = L.marker(p.coords).addTo(map);
      m.on('click', ()=> showInfo(i));
      return m;
    });

    // Показываем инфо + слайдер
    function showInfo(i){
      const p = points[i];
      document.getElementById('info-content').innerHTML =
        `<div class="space-y-3">
          <div class="relative">
            <button id="prev" class="absolute left-0 top-1/2 -translate-y-1/2 bg-white p-1 rounded-full">‹</button>
            <img id="slide-img" src="${p.imgs[0]}" alt="${p.name}" class="rounded-xl w-full h-40 object-cover shadow"/>
            <button id="next" class="absolute right-0 top-1/2 -translate-y-1/2 bg-white p-1 rounded-full">›</button>
          </div>
          <h2 class="font-bold text-lg">${p.name}</h2>
          <p class="text-sm">${p.desc}</p>
          <a href="${p.route}" target="_blank" class="inline-block bg-teal text-white px-3 py-1 rounded hover:bg-navy">Проложить маршрут</a>
        </div>`;
      // Карусель
      let idx = 0;
      const arr = p.imgs;
      const imgEl = document.getElementById('slide-img');
      document.getElementById('prev').onclick = ()=> { idx = (idx-1+arr.length)%arr.length; imgEl.src=arr[idx]; };
      document.getElementById('next').onclick = ()=> { idx = (idx+1)%arr.length; imgEl.src=arr[idx]; };
      // Центрируем карту
      map.setView(p.coords,15);
      markers[i].openPopup();
    }
  </script>
</body>
</html>
